<!doctype html><html lang=en-uk dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Sensors # Depending on your robots, you should have a set of 3 or 4 different sensors contemporarily receiving data about your robots location and it&rsquo;s environment. The possible sensors you may have are: magnetometer, encoders, external positioning, lidar. There might be also an option to include an accelerometer too.
Some sensors will have a much higher reliability than others. For example, the external positioning is likely to be far more accurate than the encoders, as it is always observing the robot from a fixed, external reference frame."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Sensors"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="http://ocean-perception.github.io/mobile_robotics/sensors/"><title>Sensors | Mobile Robotics documentation</title><link rel=manifest href=/mobile_robotics/manifest.json><link rel=icon href=/mobile_robotics/favicon.png type=image/x-icon><link rel=stylesheet href=/mobile_robotics/book.min.c58292d36b18b675680ab9baea2029204537b839ea72f258746ec0f32ce8d6c8.css integrity="sha256-xYKS02sYtnVoCrm66iApIEU3uDnqcvJYdG7A8yzo1sg=" crossorigin=anonymous><script defer src=/mobile_robotics/flexsearch.min.js></script>
<script defer src=/mobile_robotics/en.search.min.09fda046a640c1837291a46ae8b4baaa04ec2dc27c6ea9b3f99baceac81e498e.js integrity="sha256-Cf2gRqZAwYNykaRq6LS6qgTsLcJ8bqmz+Zus6sgeSY4=" crossorigin=anonymous></script>
<script defer src=/mobile_robotics/sw.min.6c62faa43e063351bb8db857ed6743bc77e390d2df184c1171b023c4fbfbe0c0.js integrity="sha256-bGL6pD4GM1G7jbhX7WdDvHfjkNLfGEwRcbAjxPv74MA=" crossorigin=anonymous></script>
<link rel=alternate type=application/rss+xml href=http://ocean-perception.github.io/mobile_robotics/sensors/index.xml title="Mobile Robotics documentation"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/mobile_robotics/><img src=/mobile_robotics/logo.png alt=Logo><span>Mobile Robotics documentation</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/mobile_robotics/><strong>Home</strong></a></li><li><a href=/mobile_robotics/sensors/ class=active>Sensors</a></li><li><a href=/mobile_robotics/programming/>Programming</a></li><li><a href=/mobile_robotics/intelligent_mobile_robotics/>Mobile robotics</a></li><li><a href=/mobile_robotics/maritime_robotics/>Maritime robotics</a><ul><li><a href=/mobile_robotics/maritime_robotics/platform/>Platform</a></li></ul></li><li><a href=/mobile_robotics/external_localisation/>External localisation</a></li><li><a href=/mobile_robotics/pi_configuration/>Pi Configuration</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/mobile_robotics/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Sensors</strong>
<label for=toc-control><img src=/mobile_robotics/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#sensor-code-structure>Sensor Code Structure</a></li></ul><ul><li><a href=#lidar>Lidar</a></li><li><a href=#external-localisation>External Localisation</a></li><li><a href=#rotary-encoders>Rotary Encoders</a></li><li><a href=#compassmagnetometer>Compass/magnetometer</a></li><li><a href=#actuators>Actuators</a></li></ul></nav></aside></header><article class=markdown><h1 id=sensors>Sensors
<a class=anchor href=#sensors>#</a></h1><p>Depending on your robots, you should have a set of 3 or 4 different sensors contemporarily receiving data about your robots location and it&rsquo;s environment. The possible sensors you may have are: magnetometer, encoders, external positioning, lidar.
There might be also an option to include an accelerometer too.</p><p>Some sensors will have a much higher reliability than others. For example, the external positioning is likely to be far more accurate than the encoders, as it is always observing the robot from a fixed, external reference frame.</p><p>The encoders, even if the easiest to code, as there is a continuous and simple feedback about the motor distance; can be thought to be not as reliable as they have to work on the no-slip assumption. On the current code, an assumption about their turn radius has also been made. Causing a slight variance if the robot actually has a turn radius which differs from the one assumed.</p><p>For more information about how the main body of code incorporates the code, proceed to the programming section</p><h2 id=sensor-code-structure>Sensor Code Structure
<a class=anchor href=#sensor-code-structure>#</a></h2><p>The code was made in order to attempt to make the combination of information between the sensors as easily as possible</p><p>To do this, a structure, seen below was created.</p><p><img src=static/instance.png alt=instance></p><p>The BaseLoggable class, creates separate message format that both sensors and motors (actuators) will inherit, (and records everything that is sensed or occurred). The sensors class will then configure the sensor by using the <em>YAML</em> file.</p><p>Working through the tree, the BaseLogger class logs any data it receives, and initially sets the message format for both the BaseSensor and Motors. The BaseSensor the configuration of the sensor, (given in the yaml file), and will configure the correct message type, driver etc.. to the current sensor being recorded. Finally the Sensor records the data, given the message structure and driver.</p><h1 id=types-of-sensors>Types of sensors
<a class=anchor href=#types-of-sensors>#</a></h1><h2 id=lidar>Lidar
<a class=anchor href=#lidar>#</a></h2><p>The lidar works by via laser triangulation. It releases very fast pulses of light towards a target and measures the amount of time it takes for the light to travel back.</p><p>The message will be saved in the form of a LaserScanMessage:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LaserScanMessage</span>:
</span></span><span style=display:flex><span>  stamp_s: float
</span></span><span style=display:flex><span>  angle_min_rad: float <span style=color:#75715e># start angle of the scan [rad]</span>
</span></span><span style=display:flex><span>  angle_max_rad: float <span style=color:#75715e># end angle of the scan [rad]</span>
</span></span><span style=display:flex><span>  time_increment_s: float <span style=color:#75715e># time between measurements [seconds]</span>
</span></span><span style=display:flex><span>  range_min_m: float <span style=color:#75715e># minimum range value [m]</span>
</span></span><span style=display:flex><span>  range_max_m: float <span style=color:#75715e># maximum range value [m]</span>
</span></span><span style=display:flex><span>  ranges: List[float] <span style=color:#75715e># range data [m]</span>
</span></span><span style=display:flex><span>  angles: List[float] <span style=color:#75715e># angle data [m]</span>
</span></span><span style=display:flex><span>  intensities: List[float] <span style=color:#75715e># device-specific units</span>
</span></span></code></pre></div><p>Here is an example scan that the lidar made of it&rsquo;s surrounding space in an office.</p><p><img src=static/videos/rplidar.gif alt=rplidar></p><p>Of course the information is still contains a fair amount of noise, as students, you will have to filter the information to then be able to use it in order to understand where the robot is with respect to neighbouring walls and maybe other rovers.</p><h2 id=external-localisation>External Localisation
<a class=anchor href=#external-localisation>#</a></h2><p>The external localisation is a way to simulate gps or other external positioning methods by using camera vision. The camera recognises the tags, and to due to the nature and distinctiveness of the tags, it is able to very effectively understand both the position and rotation of the tags.</p><p><img src=static/videos/aruco_example.gif alt=aruco_example></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>RobotStateMessage</span>:
</span></span><span style=display:flex><span>  stamp_s: float  <span style=color:#75715e># acquisition time [seconds]</span>
</span></span><span style=display:flex><span>  x_m: float  <span style=color:#75715e># x position of the robot [m]</span>
</span></span><span style=display:flex><span>  y_m: float  <span style=color:#75715e># y position of the robot [m]</span>
</span></span><span style=display:flex><span>  z_m: float  <span style=color:#75715e># z position of the robot [m]</span>
</span></span><span style=display:flex><span>  roll_rad: float  <span style=color:#75715e># roll of the robot [rad]</span>
</span></span><span style=display:flex><span>  pitch_rad: float  <span style=color:#75715e># pitch of the robot [rad]</span>
</span></span><span style=display:flex><span>  yaw_rad: float  <span style=color:#75715e># yaw of the robot [rad]</span>
</span></span><span style=display:flex><span>  vx_mps: float  <span style=color:#75715e># linear velocity in x [m/s]</span>
</span></span><span style=display:flex><span>  vy_mps: float  <span style=color:#75715e># linear velocity in y [m/s]</span>
</span></span><span style=display:flex><span>  vz_mps: float  <span style=color:#75715e># linear velocity in z [m/s]</span>
</span></span><span style=display:flex><span>  wx_radps: float  <span style=color:#75715e># angular velocity in x [rad/s]</span>
</span></span><span style=display:flex><span>  wy_radps: float  <span style=color:#75715e># angular velocity in y [rad/s]</span>
</span></span><span style=display:flex><span>  wz_radps: float  <span style=color:#75715e># angular velocity in z [rad/s]</span>
</span></span><span style=display:flex><span>  ax_mpss: float  <span style=color:#75715e># linear acceleration in x [m/s^2]</span>
</span></span><span style=display:flex><span>  ay_mpss: float  <span style=color:#75715e># linear acceleration in y [m/s^2]</span>
</span></span><span style=display:flex><span>  az_mpss: float  <span style=color:#75715e># linear acceleration in z [m/s^2]</span>
</span></span></code></pre></div><h2 id=rotary-encoders>Rotary Encoders
<a class=anchor href=#rotary-encoders>#</a></h2><p>The encoders are electromechanical devices that detects the angular position or motion of a shaft. The Pi-top was configured in such a way that the encoders return angle travelled. As a result the velocity calculated won&rsquo;t be as accurate as other sensors.</p><h2 id=compassmagnetometer>Compass/magnetometer
<a class=anchor href=#compassmagnetometer>#</a></h2><p>The magnetometer is a device that measures magnetic field. This sensor will return the yaw of the vessel or vehicle.</p><h2 id=actuators>Actuators
<a class=anchor href=#actuators>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpeedRequestMessage</span>:
</span></span><span style=display:flex><span>  stamp_s: float <span style=color:#75715e># request time [seconds]</span>
</span></span><span style=display:flex><span>  vx_mps: float <span style=color:#75715e># linear velocity in x [m/s]</span>
</span></span><span style=display:flex><span>  vy_mps: float <span style=color:#75715e># linear velocity in y [m/s]</span>
</span></span><span style=display:flex><span>  vz_mps: float <span style=color:#75715e># linear velocity in z [m/s]</span>
</span></span><span style=display:flex><span>  wx_radps: float <span style=color:#75715e># angular velocity in x [rad/s]</span>
</span></span><span style=display:flex><span>  wy_radps: float <span style=color:#75715e># angular velocity in y [rad/s]</span>
</span></span><span style=display:flex><span>  wz_radps: float <span style=color:#75715e># angular velocity in z [rad/s]</span>
</span></span></code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/ocean-perception/mobile_robotics/commit/46dd10977fbaf5dd3c7adea2e955496e9c120088 title='Last modified by miquelmassot | Sep 9, 2022' target=_blank rel=noopener><img src=/mobile_robotics/svg/calendar.svg class=book-icon alt=Calendar>
<span>Sep 9, 2022</span></a></div><div><a class="flex align-center" href=https://github.com/ocean-perception/mobile_robotics/edit/main/content/sensors/_index.md target=_blank rel=noopener><img src=/mobile_robotics/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#sensor-code-structure>Sensor Code Structure</a></li></ul><ul><li><a href=#lidar>Lidar</a></li><li><a href=#external-localisation>External Localisation</a></li><li><a href=#rotary-encoders>Rotary Encoders</a></li><li><a href=#compassmagnetometer>Compass/magnetometer</a></li><li><a href=#actuators>Actuators</a></li></ul></nav></div></aside></main></body></html>